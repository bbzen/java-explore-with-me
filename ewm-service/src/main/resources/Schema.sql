CREATE TABLE IF NOT EXISTS users (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
email VARCHAR(254) NOT NULL,
name VARCHAR(250) NOT NULL
);

CREATE TABLE IF NOT EXISTS categories (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name VARCHAR(50) NOT NULL,
CONSTRAINT unq_name UNIQUE(name)
);

CREATE TABLE IF NOT EXISTS locations (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
lat float NOT NULL,
lon float NOT NULL
);

CREATE TABLE IF NOT EXISTS events (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
annotation VARCHAR(2000) NOT NULL,
category BIGINT REFERENCES categories(id),
description VARCHAR(7000) NOT NULL,
eventDate TIMESTAMP WITHOUT TIME ZONE,
initiator BIGINT REFERENCES users(id),
location BIGINT REFERENCES locations(id),
paid Boolean NOT NULL,
participantsLimit int,
publishedOn timestamp WITHOUT TIME ZONE,
requestModeration Boolean NOT NULL,
state varchar(31) NOT NULL,
title varchar(120) NOT NULL
);

CREATE TABLE IF NOT EXISTS requests (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
event BIGINT REFERENCES events(id),
created TIMESTAMP WITHOUT TIME ZONE,
requester BIGINT,
status varchar(31) NOT NULL,
confirmed boolean NOT NULL
);